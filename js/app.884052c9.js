(function(t){function e(e){for(var i,o,s=e[0],c=e[1],l=e[2],d=0,v=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&v.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0104":function(t,e,n){},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=n("5f5b"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main",attrs:{id:"root"}},[i("div",{staticClass:"bg-dark"},[i("b-navbar",{staticClass:"container py-3",attrs:{type:"dark"}},[i("img",{staticClass:"mr-1",attrs:{src:n("c704"),alt:"Near Dice",height:"32px"}}),i("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),i("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[i("b-navbar-nav",[i("b-nav-item",{attrs:{href:"#"}},[t._v("How To Play")]),i("b-nav-item",{attrs:{href:"#",disabled:""}},[t._v("Rules")])],1),i("b-navbar-nav",{staticClass:"ml-auto"},[i("button",{directives:[{name:"show",rawName:"v-show",value:t.isSignedIn,expression:"isSignedIn"}],staticClass:"btn btn-info",staticStyle:{float:"right"},on:{click:t.logout}},[t._v(" Sign Out ")]),i("button",{directives:[{name:"show",rawName:"v-show",value:!t.isSignedIn,expression:"!isSignedIn"}],staticClass:"btn btn-info",staticStyle:{float:"right"},on:{click:t.login}},[t._v(" Sign In ")]),i("b-nav-item-dropdown",{attrs:{text:"Language",right:""}},[i("b-dropdown-item",{attrs:{href:"#"}},[t._v("EN")]),i("b-dropdown-item",{attrs:{href:"#"}},[t._v("中文")])],1)],1)],1)],1)],1),i("div",{staticClass:"container pt-4"},[i("SignedIn")],1),t._m(0)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"bd-footer p-3 p-md-5 mt-5 bg-light text-center text-sm-start"},[n("div",{staticClass:"container text-center"},[n("p",[n("strong",[t._v(" NEAR DICE DAPP")])]),n("span",[t._v("Copyright 2021")])])])}],s=(n("99af"),n("0104"),n("db49")),c=n.n(s),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"vld-parent"},[n("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}})],1),n("main",[n("h1",{directives:[{name:"show",rawName:"v-show",value:t.isSignedIn,expression:"isSignedIn"}],staticClass:"shadow py-2"},[t._v(" Welcome "+t._s(t.accountId)+", You have "+t._s(this.leftCount)+" times to dice ")]),n("div",{staticClass:"contianer"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("form",{staticClass:"shadow mt-5 py-4",on:{submit:function(e){return e.preventDefault(),t.buyDice(e)}}},[n("fieldset",{ref:"fieldset"},[n("div",{staticClass:"form-group py-3"},[n("span",{staticClass:"text-white"},[t._v("Buy ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.rollCount,expression:"rollCount"}],staticClass:"ml-2 mr-2",attrs:{name:"rollCount",id:"roll"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.rollCount=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"1",selected:"selected"}},[t._v("1")]),n("option",{attrs:{value:"1"}},[t._v("5")]),n("option",{attrs:{value:"1"}},[t._v("10")]),n("option",{attrs:{value:"1"}},[t._v("30")]),n("option",{attrs:{value:"1"}},[t._v("50")]),n("option",{attrs:{value:"1"}},[t._v("100")]),n("option",{attrs:{value:"1"}},[t._v("1000")])]),n("span",{staticClass:"text-white"},[t._v(" times")]),n("button",{staticClass:"btn btn-danger btn-sm ml-2",attrs:{id:"buy_dice"}},[t._v(" Buy ")])])])])]),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"mt-5"},[n("h2",{staticClass:"text-white text-center"},[t._v("Jackpot:")]),n("p",{staticClass:"text-center"},[n("span",{staticClass:"display-3",staticStyle:{"letter-spacing":"1rem"}},[t._v(t._s(t.jackpot))]),t._v("Near")]),n("p",{staticClass:"text-center display-4 text-white"},[t._v("Recent Wins")]),n("table",{staticClass:"table table-hover",staticStyle:{border:"solid 1px #dee2e6",background:"#fff"}},[t._m(0),n("tbody",t._l(t.winList,(function(e){return n("tr",{key:e.height},[n("th",{attrs:{scope:"row"}},[t._v(t._s(e.height))]),n("td",[t._v(t._s(e.user))]),n("td",[n("span",{staticStyle:{color:"green"}},[t._v(t._s(t.formatAmount(e.amount)))]),t._v(" Near")])])})),0)])])]),n("div",{staticClass:"col-md-3"},[n("form",{staticClass:"shadow mt-5 py-4",on:{submit:function(e){return e.preventDefault(),t.rollDice(e)}}},[n("fieldset",{ref:"fieldset"},[n("div",[n("span",{staticClass:"text-white"},[t._v("Select number to bet")]),n("br"),n("ul",[n("li",{staticClass:"number-item"},[n("a",{class:t.active1,on:{click:function(e){return t.chooseNumber(1)}}},[t._v("1")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active2,on:{click:function(e){return t.chooseNumber(2)}}},[t._v("2")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active3,on:{click:function(e){return t.chooseNumber(3)}}},[t._v("3")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active4,on:{click:function(e){return t.chooseNumber(4)}}},[t._v("4")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active5,on:{click:function(e){return t.chooseNumber(5)}}},[t._v("5")])]),n("li",{staticClass:"number-item"},[n("a",{class:t.active6,on:{click:function(e){return t.chooseNumber(6)}}},[t._v("6")])])]),n("button",{staticClass:"btn btn-warning btn-sm ml-2",attrs:{id:"roll_dice"}},[t._v(" Roll ")])])])])])])])])])},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Height")]),n("th",{attrs:{scope:"col"}},[t._v("Username")]),n("th",{attrs:{scope:"col"}},[t._v("Prize")])])])}],d=n("1da1"),v=(n("96cf"),n("d3b7"),n("25f0"),n("5319"),n("ac1f"),n("d9eb")),h=c()("production");function p(){return f.apply(this,arguments)}function f(){return f=Object(d["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["connect"])(Object.assign({deps:{keyStore:new v["keyStores"].BrowserLocalStorageKeyStore}},h));case 2:return e=t.sent,window.walletConnection=new v["WalletConnection"](e),window.accountId=window.walletConnection.getAccountId(),t.next=7,new v["Contract"](window.walletConnection.account(),h.contractName,{viewMethods:["get_greeting","get_account_dice_count","get_win_history"],changeMethods:["set_greeting","roll_dice","buy_dice"]});case 7:window.contract=t.sent;case 8:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function g(){window.walletConnection.signOut(),window.location.replace(window.location.origin+window.location.pathname)}function w(){window.walletConnection.requestSignIn(h.contractName)}console.log(h);var m=n("9062"),b=n.n(m),_=(n("e40d"),{name:"SignedIn",components:{Loading:b.a},data:function(){return{gas:Math.pow(10,14).toString(),at:"000000000000000000000000",savedGreeting:"",newGreeting:"",leftCount:0,rollCount:"",rollNumber:"",jackpot:100,winList:{},active1:"",active2:"",active3:"",active4:"",active5:"",active6:"",isLoading:!1,fullPage:!0}},created:function(){this.getLeftCount(),this.getWinHistory()},computed:{isSignedIn:function(){return!!window.walletConnection&&window.walletConnection.isSignedIn()},accountId:function(){return window.accountId},contractId:function(){return window.contract?window.contract.contractId:null},networkId:function(){return window.networkId}},methods:{chooseNumber:function(t){console.log(t),this.rollNumber=t,1==t&&(this.active1="active",this.active2="",this.active3="",this.active4="",this.active5="",this.active6=""),2==t&&(this.active1="",this.active2="active",this.active3="",this.active4="",this.active5="",this.active6=""),3==t&&(this.active1="",this.active2="",this.active3="active",this.active4="",this.active5="",this.active6=""),4==t&&(this.active1="",this.active2="",this.active3="",this.active4="active",this.active5="",this.active6=""),5==t&&(this.active1="",this.active2="",this.active3="",this.active4="",this.active5="active",this.active6=""),6==t&&(this.active1="",this.active2="",this.active3="",this.active4="",this.active5="",this.active6="active")},getLeftCount:function(){var t=this;window.contract.get_account_dice_count({account_id:window.accountId}).then((function(e){t.leftCount=e}))},showDice:function(t){this.diceNum=t,this.diceStart=!this.diceStart},buyDice:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$refs.fieldset.disabled=!0,t.prev=1,t.next=4,window.contract.buy_dice({},this.gas,parseInt(this.rollCount)+this.at);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0);case 9:return t.prev=9,this.$refs.fieldset.disabled=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[1,6,9,12]])})));function e(){return t.apply(this,arguments)}return e}(),rollDice:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,this.$refs.fieldset.disabled=!0,t.prev=2,t.next=5,window.contract.roll_dice({target:parseInt(this.rollNumber)}).then((function(t){if(e.isLoading=!1,t.dice_point===t.user_guess){var n=t.reward_amount.toString(),i=n.substr(0,n.length-20),a=i.substr(0,i.length-4),r=i.substr(0,a.legnth);alert("Congratulations to you, you win "+a+"."+r+" near")}else alert("You lose, the number is "+t.dice_point);e.leftCount=e.leftCount-1,e.jackpot=e.formatAmount(t.jackpod_left),console.log(t)}));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),console.log(t.t0);case 10:return t.prev=10,this.$refs.fieldset.disabled=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[2,7,10,13]])})));function e(){return t.apply(this,arguments)}return e}(),getWinHistory:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.contract.get_win_history({from_index:0,limit:20}).then((function(t){e.winList=t,console.log(t)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));function e(){return t.apply(this,arguments)}return e}(),formatAmount:function(t){var e=t.toString(),n=e.substr(0,e.length-20),i=n.substr(0,n.length-4),a=n.substr(0,i.legnth);return i+"."+a},logout:g}}),C=_,y=n("2877"),x=Object(y["a"])(C,l,u,!1,null,null,null),k=x.exports,I=c()("production");console.log("networkId:".concat(I.networkId," CONTRACT_NAME:").concat(I.contractName)),window.networkId=I.networkId;var S={created:function(){document.title="NEAR DICE DAPP"},name:"App",components:{SignedIn:k},computed:{isSignedIn:function(){return window.walletConnection.isSignedIn()}},methods:{login:function(){console.log("calling utils.login"),w()},logout:g}},N=S,O=Object(y["a"])(N,r,o,!1,null,null,null),j=O.exports;n("f9e3"),n("2dd8");i["default"].use(a["a"]),i["default"].config.productionTip=!1,window.nearInitPromise=p().then((function(){new i["default"]({render:function(t){return t(j)}}).$mount("#app")}))},c704:function(t,e,n){t.exports=n.p+"img/neardice-logo.74eebb3e.png"},db49:function(t,e){var n=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_CONTRACT_NAME||"dev-1614240595058-5266655";function i(t){switch(t){case"production":case"mainnet":case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org"};case"betanet":return{networkId:"betanet",nodeUrl:"https://rpc.betanet.near.org",contractName:n,walletUrl:"https://wallet.betanet.near.org",helperUrl:"https://helper.betanet.near.org",explorerUrl:"https://explorer.betanet.near.org"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"https://rpc.ci-testnet.near.org",contractName:n,masterAccount:"test.near"};case"ci-betanet":return{networkId:"shared-test-staging",nodeUrl:"https://rpc.ci-betanet.near.org",contractName:n,masterAccount:"test.near"};default:throw Error("Unconfigured environment '".concat(t,"'. Can be configured in src/config.js."))}}t.exports=i}});
//# sourceMappingURL=app.884052c9.js.map